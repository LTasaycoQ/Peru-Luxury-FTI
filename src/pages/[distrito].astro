---
import BaseLayout from "../layouts/BaseLayout.astro";
import DistrictInicio from "../components/destinations/distritos/districtInicio.astro";
import OurParners from "../components/destinations/distritos/OurParners.astro";
import Fondo from "../components/Fondo.astro";
import { destinations } from "../data/destinatios";

const backgrounds = import.meta.glob<{ default: ImageMetadata }>(
  '../assets/backgrounds/distritos-backgrounds/*.webp',
  { eager: true }
);

export function getStaticPaths() {
  return destinations.map((page) => ({
    params: { distrito: page.distrito },
    props: { ...page },
  }));
}

const { title, description, image1, image2, image3, fondo, partnersTitle, partnersVariant, partners } = Astro.props;

function getFondo(filename: string): string {
  const key = `../assets/backgrounds/distritos-backgrounds/${filename}`;
  return backgrounds[key]?.default?.src ?? '';
}
---

<BaseLayout title={title} description={description}>
  <Fondo fondo={`url(${getFondo(fondo)})`} />
  <main>
    <DistrictInicio 
      title={title} 
      description={description} 
      image1={image1} 
      image2={image2} 
      image3={image3} 
    />
    <OurParners 
      title={partnersTitle} 
      variant={partnersVariant} 
      partners={partners} 
    />
  </main>
</BaseLayout>