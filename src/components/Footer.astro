---
import { destinations } from "../data/destinations/destinatios";

const topDestinations = destinations.slice(0, 9);
---

<footer class="footer-modern">
  <div class="footer-content">
    
    <div class="footer-brand">
      <img src="https://i0.wp.com/peruluxuryjourneys.com/wp-content/uploads/2025/03/PLJ-LOGO-1.png?fit=240%2C70&ssl=1" alt="Logo" class="footer-logo max-sm:grid max-sm:grid-flow-col max-sm:justify-items-center max-sm:items-center">
      <p class="brand-description max-sm:text-center">
        Crafting unique and unforgettable luxury experiences across the wonders of Peru.
      </p>
     
    </div>

    <div class="flex gap-[80px] max-sm:flex-col">
      <div class="link-group">
        <h4 class="max-sm:text-center">Explore</h4>
        <ul>
          <li><a href="/destinations">Destinations</a> <i class="pl-[10px] text-[14px] text-gray-400 bi bi-box-arrow-up-right"></i></li>
          <li><a href="/programs">Luxury Programs</a> <i class="pl-[10px] text-[14px] text-gray-400 bi bi-box-arrow-up-right"></i></li>
          <li><a href="/about-us">About Our Story</a> <i class="pl-[10px] text-[14px] text-gray-400 bi bi-box-arrow-up-right"></i></li>
        </ul>
      </div>
      <div class="link-group">
        <h4 class="max-sm:text-center">Top Destinations</h4>
        <ul class="grid grid-cols-2 justify-center w-full">
          {topDestinations.map(d => (
            <li>
              <i class="bi bi-link-45deg"></i>
              <a href={`/${d.distrito}`}>
                {d.distrito.charAt(0).toUpperCase() + d.distrito.slice(1).replace(/-/g, " ")}
              </a>
            </li>
          ))}
        </ul>
      </div>
    </div>

    <div class="footer-newsletter">
      <h4>Join Our Newsletter</h4>
      <p>Receive exclusive travel tips and luxury offers.</p>
      <form id="formulario-subcription" class="form-contacto-subcribete">
        <div class="input-box">
          <div class="box-input--form">
            <input name="Nombre" type="text" required placeholder="First Name">
            <input name="Apellido" type="text" required placeholder="Last Name">
          </div>
          <input name="Email" type="email" required placeholder="Email">
          <button id="btn-submit" class="button" type="submit">Subscribe</button>
          <p id="form-msg" style="display:none; color:#DABB42; font-size:13px; margin-top:6px;">âœ“ You're subscribed!</p>
        </div>
      </form>
    </div>
  </div>

</footer>



<script is:inline>
  const apiMailEndpointSubscribete = "https://tiny-constancy-peru-luxury-fa631626.koyeb.app/subscribe";
  const formSubscribete = document.querySelector(".form-contacto-subcribete");

  formSubscribete?.addEventListener("submit", async (e) => {
    e.preventDefault();

    const btn = formSubscribete.querySelector("button");
    btn.disabled = true;
    btn.innerText = "Sending...";

    const formData = new FormData(formSubscribete);
    const data = {
      nombre: formData.get("Nombre"),
      apellido: formData.get("Apellido"),
      email: formData.get("Email")
    };

    try {
      const response = await fetch(apiMailEndpointSubscribete, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
      });

      if (!response.ok) throw new Error(`Error: ${response.status}`);

      await response.json();

      document.getElementById("form-msg").style.display = "block";
      formSubscribete.reset();

    } catch (error) {
      console.error("Error:", error);
      document.getElementById("form-msg").innerText = "Something went wrong. Please try again.";
      document.getElementById("form-msg").style.color = "#e57373";
      document.getElementById("form-msg").style.display = "block";
    } finally {
      btn.disabled = false;
      btn.innerText = "Subscribe";
    }
  });
</script>

<style>
  .footer-modern {
    background-color: #1a1a1a;
    color: #ffffff;
    padding: 80px 5% 30px 5%;
    font-family: 'Poppins', sans-serif;
  }

  .footer-content {
    max-width: 1500px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: 1.6fr  3fr 2fr;
    gap: 30px;
  }

  .footer-logo {
    max-width: 300px;
    margin-bottom: 20px;
    filter: brightness(10.2);
  }

  .brand-description {
    color: #999;
    font-size: 13px;
    line-height: 1.6;
    margin-bottom: 25px;
  }

  .social-links {
    display: flex;
    gap: 15px;
  }

  .social-links a {
    color: #DABB42;
    font-size: 20px;
    transition: transform 0.3s ease;
  }

  .social-links a:hover {
    transform: translateY(-5px);
    color: #fff;
  }

  .link-group h4 {
    color: #DABB42;
    font-size: 16px;
    font-weight: 600;
    margin-bottom: 25px;
    text-transform: uppercase;
    letter-spacing:1.2px;
  }

  .link-group ul {
    list-style: none;
    padding: 0;
  }

  .link-group ul li {
    margin-bottom: 12px;
  }

  .link-group a {
    text-decoration: none;
    color: #ccc;
    font-size: 13px;
    transition: all 0.3s ease;
    display: inline-block;
  }

  .link-group a:hover {
    color: #fff;
    transform: translateX(8px);
  }

  .footer-newsletter h4 {
    color: #DABB42;
    margin-bottom: 15px;
    font-size: 16px;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .footer-newsletter p {
    font-size: 14px;
    color: #999;
    margin-bottom: 20px;
  }

  .box-input--form {
    display: flex;
    gap: 10px;
  }

  .input-box {
    display: flex;
    gap:14px;
    flex-direction: column;
    padding: 5px 0;
  }

  .input-box input {
    background: white;
    border: none;
    border-radius: 10px;
    color: rgb(107, 107, 107);
    padding: 10px;
    width: 100%;
    outline: none;
    font-family: 'Poppins', sans-serif;
    font-size: 14px;
  }

  .input-box button {
    background-color: #DABB42;
    border-radius: 10px;
    color: #1a1a1a;
    border: none;
    font-weight: 700;
    font-family: 'Poppins', sans-serif;
    cursor: pointer;
    padding: 11px;
    font-size: 14px;
    transition: background-color 0.3s;
  }

  .input-box button:hover {
    background-color: #c9a830;
  }

  .input-box button:disabled {
    opacity: 0.6;
    cursor: not-allowed;
  }

  .footer-bottom {
    margin-top: 80px;
    padding-top: 30px;
    border-top: 1px solid #333;
    display: flex;
    justify-content: space-between;
    font-size: 12px;
    color: #666;
    max-width: 1500px;
    margin-left: auto;
    margin-right: auto;
  }

  .bottom-legal {
    display: flex;
    gap: 20px;
  }

  .bottom-legal a {
    color: #666;
    text-decoration: none;
  }

  .bottom-legal a:hover {
    color: #DABB42;
  }

  @media (max-width: 1024px) {
    .footer-content {
      grid-template-columns: 1fr 2fr;
    }
    .footer-newsletter {
      grid-column: span 2;
    }
  }

  @media (max-width: 768px) {
    .footer-content {
      grid-template-columns: 1fr;
    }
    .footer-newsletter {
      grid-column: span 1;
    }
    .footer-bottom {
      flex-direction: column;
      gap: 15px;
      text-align: center;
      margin-top: 40px;
    }
    .box-input--form {
      flex-direction: column;
    }
  }
</style>