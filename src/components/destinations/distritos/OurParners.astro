---
import { Image } from 'astro:assets'

interface Partner {
  image: string;
  name: string;
  description?: string;
  link?: string;
}

interface Props {
  title?: string;
  variant: "default" | "single" | "detailed";
  partners: Partner[];
}

const { title = "Our Parners", variant, partners } = Astro.props;

const isValidImage = (src: string) => src && src.startsWith('http');
---

<section class="our-parnes font-[Poppins]">
  <div class="container-title">
    <h2 class="text-center">{title}</h2>
    <hr class="line" />
  </div>

  {variant === "default" && (
    <div class="grid grid-cols-3 gap-[50px] w-[70%] max-xl:w-[90%] max-lg:grid-cols-2 max-md:grid-cols-1">
      {partners.map((partner) => (
        <div class="card-default">
          {isValidImage(partner.image) ? (
            <Image 
              src={partner.image} 
              alt={partner.name} 
              width={100}
              height={350}
              class="imagen w-full h-[280px] object-cover" 
            />
          ) : (
            <div class="w-full h-[350px] bg-gray-200 flex items-center justify-center">No Image</div>
          )}
          <p class="text-default ">{partner.name}</p>
          <a href={partner.link} class="link-default"><u><i>Read More</i></u></a>
        </div>
      ))}
    </div>
  )}

  {variant === "single" && (
    <div class="flex justify-center items-center flex-wrap gap-[30px]">
      {partners.map((partner) => (
        <div class="relative">
          {isValidImage(partner.image) ? (
            <Image 
              src={partner.image} 
              alt={partner.name} 
              width={400}
              height={300}
              class="w-[400px] h-[300px] object-cover" 
            />
          ) : (
            <div class="w-[400px] h-[300px] bg-gray-200"></div>
          )}
          <span class="absolute bottom-4 left-4 text-white text-[25px] font-medium">{partner.name}</span>
        </div>
      ))}
    </div>
  )}

  {variant === "detailed" && (
    <div class="grid grid-cols-2 gap-[50px] w-[70%] max-xl:w-[90%] max-lg:grid-cols-2 max-md:grid-cols-1">
      {partners.map((partner) => (
        <div class="card-default">
          {isValidImage(partner.image) ? (
            <Image 
              src={partner.image} 
              alt={partner.name} 
              width={600}
              height={350}
              class="imagen w-full h-[350px] object-cover" 
            />
          ) : (
            <div class="w-full h-[350px] bg-gray-200 flex items-center justify-center">No Image</div>
          )}
          <h3 class="text-default">{partner.name}</h3>
          <p class="text-sm text-gray-600 mt-1">{partner.description}</p>
          <a href={partner.link} class="link-default"><u><i>Read More</i></u></a>
        </div>
      ))}
    </div>
  )}
</section>

<style>
  .text-default {
    font-size: 20px;
    font-weight: 600;
    margin-top: 20px;
    margin-bottom: 15px;
    color: #3f3f3f;
  }

  .link-default {
    cursor: pointer;
    display: inline-block; 
    margin-top: 20px;
    color: #af991b;
    transition: all 0.5s ease;
  }

  .link-default:hover {
    color: #f7d30e;
    transform: translateY(-10px);
  }

  .container-title {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    font-size: 40px;
    margin-top: 60px;
    font-weight: 400;
    color: #222;
    margin-bottom: 45px;
  }

  .our-parnes {

    background-color: #ffffff;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    padding-bottom: 70px;
  }

  .line {
    width: 220px;
    border-top: 3px solid rgb(196, 160, 95);
  }
</style>