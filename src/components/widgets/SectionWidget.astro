---
import { Image } from 'astro:assets';

const { title, description, image1, image2, image3 } = Astro.props;

const images = import.meta.glob<{ default: ImageMetadata }>('/src/assets/**/*.{jpeg,jpg,png,gif,webp}');

const resolveImage = async (src: string) => {
  if (!src) return null;
  if (src.startsWith('http')) return { type: 'external' as const, src };
  const mod = await images[src]?.();
  return mod?.default ? { type: 'local' as const, src: mod.default } : null;
};

const img1 = await resolveImage(image1);
const img2 = await resolveImage(image2);
const img3 = await resolveImage(image3);
---

<section class="font-[Poppins] bg-[#F7F7F7] w-full flex flex-col justify-center items-center py-[40px] lg:py-[80px]">
  <div class="flex flex-col lg:flex-row items-center justify-center gap-[40px] xl:gap-[8rem] w-[90%]">
    
    <div class="flex flex-col 2xl:w-[84rem] lg:w-[80rem] max-lg:w-full px-[20px] items-center lg:items-start text-center lg:text-left">
      <h1 class="text-[32px] md:text-[47px] font-medium pb-[35px] leading-tight text-balance">{title}</h1>
      <p class="tracking-wide text-gray-700 text-[15.4px] font-light pb-[30px] whitespace-pre-line">{description}</p>
    </div>

    <div class="flex w-full justify-center">
      <div class="flex flex-col md:flex-row gap-[15px] w-full max-w-[850px] h-auto md:h-[400px] 2xl:h-[600px]">
        
        <!-- Imagen 1 -->
        <div class="w-full md:w-1/2 h-[400px] md:h-full overflow-hidden flex items-center justify-center bg-gray-200">
          {img1 && img1.type === 'local' && (
            <Image src={img1.src} alt={title} width={800} height={600} class="w-full h-full object-cover" />
          )}
          {img1 && img1.type === 'external' && (
            <img src={img1.src} alt={title} width={800} height={600} class="w-full h-full object-cover" />
          )}
          {!img1 && <span class="text-gray-400">No image</span>}
        </div>

        <div class="flex flex-col gap-[15px] w-full md:w-1/2">

          <!-- Imagen 2 -->
          <div class="w-full h-[350px] md:h-1/2 overflow-hidden flex items-center justify-center bg-gray-200">
            {img2 && img2.type === 'local' && (
              <Image src={img2.src} alt="" width={400} height={300} class="w-full h-full object-cover" />
            )}
            {img2 && img2.type === 'external' && (
              <img src={img2.src} alt="" width={400} height={300} class="w-full h-full object-cover" />
            )}
          </div>

          <!-- Imagen 3 -->
          <div class="w-full h-[350px] md:h-1/2 overflow-hidden flex items-center justify-center bg-gray-200">
            {img3 && img3.type === 'local' && (
              <Image src={img3.src} alt="" width={400} height={300} class="w-full h-full object-cover" />
            )}
            {img3 && img3.type === 'external' && (
              <img src={img3.src} alt="" width={400} height={300} class="w-full h-full object-cover" />
            )}
          </div>

        </div>
      </div>
    </div>
  </div>
</section>